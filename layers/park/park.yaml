layer:
  id: "park"
  description: |
      The park layer contains large area features from OpenStreetMap tagged with
      [`boundary=national_park`](http://wiki.openstreetmap.org/wiki/Tag:boundary%3Dnational_park),
      [`boundary=protected_area`](http://wiki.openstreetmap.org/wiki/Tag:boundary%3Dprotected_area),
      [`leisure=nature_reserve`](http://wiki.openstreetmap.org/wiki/Tag:leisure%3Dnature_reserve),
      or select values of [`historic=*`](http://wiki.openstreetmap.org/wiki/Key:historic).
      This layer also includes boundaries for indigenous lands tagged with 
      [`boundary=aboriginal_lands`](https://wiki.openstreetmap.org/wiki/Tag:boundary%3Daboriginal_lands).
      Indigenous boundaries are not parks, but they are included in this layer for technical reasons related to data processing.
      These boundaries represent areas with special legal and administrative status for indigenous peoples.
  buffer_size: 4
  fields:
    class:
      description: |
          Use the **class** to differentiate between different large areas.
          The class for `boundary=protected_area` parks is one of: `national_park`, `nature_reserve`, `recreation_ground`, or `historic`.
          The class for `boundary=aboriginal_lands` is `aboriginal_lands`.
    name: The OSM [`name`](http://wiki.openstreetmap.org/wiki/Key:name) value of the park (point features only).
    name_en: English name `name:en` if available, otherwise `name` (point features only).
    name_de: German name `name:de` if available, otherwise `name` or `name:en` (point features only).
    rank: Rank of the park within one tile, starting at 1 that is the most important park (point features only).
  datasource:
    geometry_field: geometry
    query: (SELECT geometry, class, name, name_en, name_de, {name_languages}, rank FROM layer_park(!bbox!, z(!scale_denominator!), !pixel_width!)) AS t
schema:
  - ./class.sql
  - ./update_park_polygon.sql
  - ./park.sql
datasources:
  - type: imposm3
    mapping_file: ./mapping.yaml
